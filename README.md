# Shopline é¡åˆ¥ç®¡ç†å™¨ - Chrome Extension

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Chrome Extension](https://img.shields.io/badge/Format-Manifest%20V3-blue.svg)](https://developer.chrome.com/docs/extensions/mv3/)

> é«˜æ•ˆç®¡ç† Shopline ç”¢å“é¡åˆ¥ - ç¯€çœæ™‚é–“ã€è¿½è¹¤æ•ˆç‡ã€æ™ºèƒ½æœå°‹

Shopline é¡åˆ¥ç®¡ç†å™¨æ˜¯ä¸€å€‹ Chrome Extensionï¼Œå¹«åŠ©é›»å•†é‹ç‡Ÿäººå“¡å¿«é€Ÿã€é«˜æ•ˆåœ°ç®¡ç†ç”¢å“åˆ†é¡ã€‚é€šéå¯¦æ™‚çµ±è¨ˆã€æœå°‹åŠŸèƒ½å’Œé©—è­‰æ©Ÿåˆ¶ï¼Œæ¯æ¬¡æ“ä½œå¯ç¯€çœ ~13 ç§’ã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ” æ™ºèƒ½æœå°‹ (Stage 5)
- å¯¦æ™‚é¡åˆ¥æœå°‹ï¼ˆ300ms debounceï¼‰
- æ”¯æ´ä¸­æ–‡å’Œè‹±æ–‡æŸ¥è©¢
- æœå°‹æ­·å²è‡ªå‹•è¿½è¹¤
- åˆ†å±¤çµæ§‹å±•ç¤º

### â±ï¸ æ™‚é–“è¿½è¹¤ (Stage 8)
- çµ±è¨ˆæ¯å¤©çš„ç§»å‹•æ¬¡æ•¸
- ç´¯è¨ˆç¯€çœæ™‚é–“é¡¯ç¤ºï¼ˆæ™‚:åˆ†:ç§’ï¼‰
- å¹³å‡æ¯æ¬¡ç§»å‹•æ™‚é–“
- æœ€è¿‘ç§»å‹•æ­·å²è¨˜éŒ„

### ğŸ“¤ æ•¸æ“šåŒ¯å‡º
- ä¸€éµåŒ¯å‡ºæ‰€æœ‰çµ±è¨ˆè³‡æ–™ï¼ˆJSONï¼‰
- åŒ…å«å®Œæ•´çš„ç§»å‹•æ­·å²
- ç”¨æ–¼å‚™ä»½å’Œåˆ†æ

### â†©ï¸ æ’¤éŠ·åŠŸèƒ½
- å¿«é€Ÿæ’¤éŠ·ä¸Šæ¬¡ç§»å‹•
- çµ±è¨ˆè‡ªå‹•å›æ»¾
- é˜²æ­¢èª¤æ“ä½œ

### âœ… é©—è­‰ç³»çµ± (Stage 7)
- 8 æ­¥é©Ÿé©—è­‰æµç¨‹
  1. è¼¸å…¥é©—è­‰
  2. å‰æª¢æª¢æŸ¥
  3. ç¯„åœé©—è­‰
  4. æ¨¹é©—è­‰
  5. æ¬Šé™æª¢æŸ¥
  6. API è«‹æ±‚
  7. éŸ¿æ‡‰é©—è­‰
  8. å¾Œé©—è­‰
- å¯¦æ™‚é€²åº¦æŒ‡ç¤º
- è©³ç´°éŒ¯èª¤æ—¥èªŒ

### âŒ éŒ¯èª¤è™•ç† (Stage 6)
- è‡ªå‹•åˆ†é¡éŒ¯èª¤é¡å‹
- ç¶²è·¯ã€APIã€é©—è­‰ã€ç¯„åœéŒ¯èª¤
- é”™è¯¯æ—¥å¿—è¿½è¹¤
- æŒ‡æ•°é€€é¿é‡è©¦

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®‰è£æ­¥é©Ÿ

1. **æ‰“é–‹ Chrome** ä¸¦é€²å…¥ `chrome://extensions/`
2. **å•Ÿç”¨** å³ä¸Šè§’ã€Œé–‹ç™¼äººå“¡æ¨¡å¼ã€
3. **é»æ“Š** ã€Œè¼‰å…¥æœªå°è£çš„æ“´å……åŠŸèƒ½ã€
4. **é¸æ“‡** æœ¬é …ç›®çš„ `/src` ç›®éŒ„
5. **ç¢ºèª** Extension å‡ºç¾åœ¨åˆ—è¡¨ä¸­

âœ… **Installation Complete!** ğŸ‰

### åŸºæœ¬ä½¿ç”¨

1. é»æ“Š Extension åœ–æ¨™æ‰“é–‹ Popup
2. æŸ¥çœ‹çµ±è¨ˆè³‡è¨Šæˆ–ä½¿ç”¨æœå°‹åŠŸèƒ½
3. åœ¨ Shopline åˆ†é¡é é¢é€²è¡Œæ“ä½œ
4. çµ±è¨ˆè‡ªå‹•æ›´æ–°

---

## ğŸ“Š åŠŸèƒ½å°ç…§è¡¨

| åŠŸèƒ½ | éšæ®µ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|------|
| çµ±è¨ˆè¿½è¹¤ | 1 | âœ… | è¨˜éŒ„ç§»å‹•æ¬¡æ•¸å’Œæ™‚é–“ |
| æœå°‹åŠŸèƒ½ | 5 | âœ… | å¯¦æ™‚é¡åˆ¥æœå°‹ |
| éŒ¯èª¤æ—¥èªŒ | 6 | âœ… | éŒ¯èª¤åˆ†é¡å’Œè¿½è¹¤ |
| é©—è­‰é€²åº¦ | 7 | âœ… | 8 æ­¥é©Ÿé©—è­‰é¡¯ç¤º |
| æ™‚é–“è¿½è¹¤ | 8 | âœ… | è©³ç´°çš„æ™‚é–“æ‘˜è¦ |
| é›†æˆæ¸¬è©¦ | 9 | âœ… | æ¸¬è©¦æª¢æŸ¥é»æ–‡æª” |
| æ–‡æª” | 10 | âœ… | é–‹ç™¼/ä½¿ç”¨è€…æŒ‡å— |

---

## ğŸ“š æ–‡æª”

### ç”¨æˆ¶æ–‡æª”
- ğŸ“– **[ä½¿ç”¨è€…æŒ‡å—](USER_GUIDE.md)** - åŠŸèƒ½è©³è§£å’Œä½¿ç”¨æŠ€å·§
- ğŸ§ª **[æ¸¬è©¦æª¢æŸ¥é»](.planning/TESTING.md)** - é›†æˆæ¸¬è©¦è¨ˆç•«

### é–‹ç™¼è€…æ–‡æª”
- ğŸ”§ **[é–‹ç™¼äººå“¡æŒ‡å—](DEVELOPER_GUIDE.md)** - æ¶æ§‹ã€APIã€é–‹ç™¼å·¥ä½œæµç¨‹
- ğŸ“‹ **[API åƒè€ƒ](#api-åƒè€ƒ)** - æ¶ˆæ¯ API å’Œå­˜å„²çµæ§‹

---

## ğŸ—ï¸ æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Chrome Extension          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  Popup (UI) â†” Background Worker â”‚
â”‚   â€¢ Stats        â€¢ Messages     â”‚
â”‚   â€¢ Search       â€¢ Storage      â”‚
â”‚   â€¢ Validation   â€¢ Handlers     â”‚
â”‚   â€¢ Time Track   â€¢ Events       â”‚
â”‚                                 â”‚
â”‚  Content Script â†” Injected JS   â”‚
â”‚   â€¢ Monitor      â€¢ AngularJS    â”‚
â”‚   â€¢ CategoryMgr  â€¢ API Bridge   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†• Shopline Page
```

### æ ¸å¿ƒçµ„ä»¶

1. **Popup** (`src/popup/`) - ç”¨æˆ¶ç•Œé¢
2. **Service Worker** (`src/background/`) - å¾Œå°é‚è¼¯
3. **Content Script** (`src/content/`) - é é¢ç›£æ§
4. **Injected Script** (`src/content/injected.js`) - AngularJS æ©‹æ¥
5. **Storage** (`src/shared/storage.js`) - æ•¸æ“šæŒä¹…åŒ–

---

## API åƒè€ƒ

### æ¶ˆæ¯ API

å¾ Popup ç™¼é€æ¶ˆæ¯åˆ° Service Workerï¼š

```javascript
// è¨˜éŒ„ç§»å‹•
chrome.runtime.sendMessage({
  action: 'recordCategoryMove',
  data: {
    categoryId: 123,
    timeSaved: 13,
    targetLevel: 2
  }
});

// ç²å–çµ±è¨ˆ
chrome.runtime.sendMessage({
  action: 'getStats'
}, response => console.log(response.stats));

// å–æœå°‹æ­·å²
chrome.runtime.sendMessage({
  action: 'getSearchHistory'
}, response => console.log(response.history));
```

### å­˜å„²çµæ§‹

```javascript
// çµ±è¨ˆ
{
  totalMoves: number,
  totalTimeSaved: number,      // seconds
  lastReset: "ISO8601"
}

// ç§»å‹•æ­·å²
[{
  timestamp: "ISO8601",
  timeSaved: number,
  categoryId: number,
  categoryName: string,
  targetLevel: number
}]

// æœå°‹æ­·å²
["query1", "query2", ...]

// éŒ¯èª¤æ—¥èªŒ
[{
  timestamp: "ISO8601",
  type: "network|api|validation|scope",
  message: string,
  details: object
}]
```

---

## ğŸ§ª æ¸¬è©¦

### é‹è¡Œæ¸¬è©¦æª¢æŸ¥é»

åƒè€ƒ [.planning/TESTING.md](.planning/TESTING.md) é€²è¡Œå®Œæ•´æ¸¬è©¦ï¼š

- Phase 1: åŸºæœ¬åŠŸèƒ½é©—è­‰
- Phase 2: æ“´å±•åŠŸèƒ½é©—è­‰
- Phase 3: Content Script é›†æˆ
- Phase 4: å®Œæ•´ç«¯åˆ°ç«¯æµç¨‹
- Phase 5: æ•¸æ“šæŒä¹…æ€§

### Console èª¿è©¦

```javascript
// åœ¨ Console ä¸­æ¸¬è©¦
// æ¨¡æ“¬é©—è­‰é€²åº¦
window._popupDebug.simulateValidation()

// åŠ è¼‰æ™‚é–“æ‘˜è¦
window._popupDebug.loadTimeSummary()

// æª¢æŸ¥å­˜å„²
new StorageManager().getStats().then(s => console.table(s))
```

---

## ğŸ› ï¸ é–‹ç™¼

### ç³»çµ±è¦æ±‚

- Chrome 120+ï¼ˆManifest V3 æ”¯æŒï¼‰
- ç„¡éœ€ Node.jsï¼ˆç´” JavaScriptï¼‰

### æœ¬åœ°é–‹ç™¼

```bash
# å…‹éš†å€‰åº«
git clone <repo>
cd shopline-category-manager

# è¼‰å…¥åˆ° Chrome
# 1. chrome://extensions
# 2. é–‹ç™¼äººå“¡æ¨¡å¼ ON
# 3. è¼‰å…¥æœªå°è£ â†’ /src
```

### ä»£ç¢¼çµæ§‹

```
src/
â”œâ”€â”€ background/
â”‚   â””â”€â”€ service-worker.js       # å¾Œå°æ¶ˆæ¯è·¯ç”±
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ content.js              # Content Script
â”‚   â”œâ”€â”€ injected.js             # AngularJS æ©‹æ¥
â”‚   â””â”€â”€ category-manager.js     # æ ¸å¿ƒé‚è¼¯
â”œâ”€â”€ popup/
â”‚   â”œâ”€â”€ popup.html              # UI çµæ§‹
â”‚   â”œâ”€â”€ popup.css               # æ¨£å¼
â”‚   â””â”€â”€ popup.js                # äº¤äº’é‚è¼¯
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ storage.js              # å­˜å„²ç®¡ç†
â”‚   â”œâ”€â”€ logger.js               # æ—¥èªŒå·¥å…·
â”‚   â””â”€â”€ constants.js            # å¸¸é‡
â”œâ”€â”€ icons/                      # æ“´å±•åœ–æ¨™
â””â”€â”€ manifest.json               # é…ç½®æ–‡ä»¶
```

---

## ğŸ”’ éš±ç§å’Œå®‰å…¨

âœ… **100% æœ¬åœ°é‹è¡Œ**
- æ‰€æœ‰æ•¸æ“šå­˜å„²åœ¨ Chrome æœ¬åœ°å­˜å„²ä¸­
- ä¸ä¸Šå‚³ä»»ä½•æ•¸æ“šåˆ°é ç¨‹æœå‹™å™¨
- å®Œå…¨é–‹æºã€é€æ˜

---

## ğŸ“„ è¨±å¯è­‰

MIT License - è©³è¦‹ [LICENSE](LICENSE)

---

## ç›¸é—œè³‡æº

- ğŸ“š [Chrome Extension æ–‡æª”](https://developer.chrome.com/docs/extensions/)
- ğŸ“š [Shopline é–‹ç™¼è€…æ–‡æª”](https://shopline.hk/)

---

## ç‰ˆæœ¬ä¿¡æ¯

| é …ç›® | å€¼ |
|------|-----|
| **ç‰ˆæœ¬** | 1.0 (Phase 1) |
| **æ ¼å¼** | Chrome Extension (Manifest V3) |
| **å¤§å°** | ~200KB (å®Œæ•´åŠŸèƒ½) |
| **é–‹ç™¼æ™‚é–“** | 4 éšæ®µå¯¦ç¾ |

---

**æœ€å¾Œæ›´æ–°**: 2026-01-23
**é–‹ç™¼éšæ®µ**: Phase 1 MVP - å®Œæˆ âœ…
**ä¸‹ä¸€æ­¥**: Phase 2 - AngularJS å¯¦æ™‚é›†æˆ
